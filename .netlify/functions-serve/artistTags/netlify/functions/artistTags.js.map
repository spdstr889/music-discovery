{
  "version": 3,
  "sources": ["file:///D:/OneDrive%20-%20Dalhousie%20University/Documents/CSCI%203172/csci3172/labs/lab4/music-discovery/netlify/functions/artistTags.js"],
  "sourceRoot": "C:/Users/SPDSTR~1/AppData/Local/Temp/tmp-23612-DmFlaOT71lX1",
  "sourcesContent": ["export const handler = async (event) => {\r\n  try {\r\n    // Safely read the name query param and trim it\r\n    const name = event?.queryStringParameters?.name ? String(event.queryStringParameters.name).trim() : \"\";\r\n    if (!name) return json(400, { error: \"Missing artist name\" });\r\n\r\n    const headers = { \"User-Agent\": \"CSCI3172-Lab4/1.0 (student@demo)\" };\r\n\r\n    // find artist\r\n    const sUrl = `https://musicbrainz.org/ws/2/artist/?query=${encodeURIComponent(name)}&fmt=json&limit=1`;\r\n    const sRes = await fetch(sUrl, { headers });\r\n    if (!sRes.ok) return json(502, { error: \"MusicBrainz search error\", status: sRes.status });\r\n    const sData = await sRes.json();\r\n    const top = sData.artists?.[0];\r\n    if (!top) return json(200, { topTag: null });\r\n\r\n    // get tags for that artist\r\n    const tUrl = `https://musicbrainz.org/ws/2/artist/${top.id}?inc=tags&fmt=json`;\r\n    const tRes = await fetch(tUrl, { headers });\r\n    if (!tRes.ok) return json(502, { error: \"MusicBrainz tag error\", status: tRes.status });\r\n    const tData = await tRes.json();\r\n\r\n    const tags = (tData.tags || []).sort((a, b) => (b.count || 0) - (a.count || 0));\r\n    const topTag = tags[0]?.name || null;\r\n\r\n    return json(200, { topTag });\r\n  } catch (err) {\r\n    // log the error server-side for debugging\r\n    console.error(\"artistTags handler error:\", err);\r\n    return json(500, { error: \"Server error\" });\r\n  }\r\n};\r\n\r\nfunction json(statusCode, body) {\r\n  return { statusCode, headers: { \"content-type\": \"application/json\" }, body: JSON.stringify(body) };\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,IAAM,UAAU,OAAO,UAAU;AACtC,MAAI;AAEF,UAAM,OAAO,OAAO,uBAAuB,OAAO,OAAO,MAAM,sBAAsB,IAAI,EAAE,KAAK,IAAI;AACpG,QAAI,CAAC,KAAM,QAAO,KAAK,KAAK,EAAE,OAAO,sBAAsB,CAAC;AAE5D,UAAM,UAAU,EAAE,cAAc,mCAAmC;AAGnE,UAAM,OAAO,8CAA8C,mBAAmB,IAAI,CAAC;AACnF,UAAM,OAAO,MAAM,MAAM,MAAM,EAAE,QAAQ,CAAC;AAC1C,QAAI,CAAC,KAAK,GAAI,QAAO,KAAK,KAAK,EAAE,OAAO,4BAA4B,QAAQ,KAAK,OAAO,CAAC;AACzF,UAAM,QAAQ,MAAM,KAAK,KAAK;AAC9B,UAAM,MAAM,MAAM,UAAU,CAAC;AAC7B,QAAI,CAAC,IAAK,QAAO,KAAK,KAAK,EAAE,QAAQ,KAAK,CAAC;AAG3C,UAAM,OAAO,uCAAuC,IAAI,EAAE;AAC1D,UAAM,OAAO,MAAM,MAAM,MAAM,EAAE,QAAQ,CAAC;AAC1C,QAAI,CAAC,KAAK,GAAI,QAAO,KAAK,KAAK,EAAE,OAAO,yBAAyB,QAAQ,KAAK,OAAO,CAAC;AACtF,UAAM,QAAQ,MAAM,KAAK,KAAK;AAE9B,UAAM,QAAQ,MAAM,QAAQ,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,EAAE,SAAS,MAAM,EAAE,SAAS,EAAE;AAC9E,UAAM,SAAS,KAAK,CAAC,GAAG,QAAQ;AAEhC,WAAO,KAAK,KAAK,EAAE,OAAO,CAAC;AAAA,EAC7B,SAAS,KAAK;AAEZ,YAAQ,MAAM,6BAA6B,GAAG;AAC9C,WAAO,KAAK,KAAK,EAAE,OAAO,eAAe,CAAC;AAAA,EAC5C;AACF;AAEA,SAAS,KAAK,YAAY,MAAM;AAC9B,SAAO,EAAE,YAAY,SAAS,EAAE,gBAAgB,mBAAmB,GAAG,MAAM,KAAK,UAAU,IAAI,EAAE;AACnG;",
  "names": []
}
